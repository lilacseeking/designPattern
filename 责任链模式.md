# 责任链模式在花呗还款中的应用

------

## 概览

[TOC]

------

## 名词解释

**责任链模式**（Chain of Responsibility Pattern）为请求创建了一个接收者对象的链。这种模式给予请求的类型，对请求的发送者和接收者进行解耦。这种类型的设计模式属于行为型模式。

在这种模式中，通常每个接收者都包含对另一个接收者的引用。如果一个对象不能处理该请求，那么它会把相同的请求传给下一个接收者，依此类推。

------



## 一、业务场景

本期花呗账单又出了，又到了花呗还款的时候了，穷到吃土的我弱弱的问支付宝这一期能不能不还了。支付宝满怀温柔的给我了一个耳光之后又亲切的告诉我可以从余额宝里扣一半，从银行卡中付一半，于是我本期的账单是这样子的：![账单详情](C:\Users\lilacseeking\Desktop\微信图片_20210219213143.png)

不换花呗的梦想破灭之后，我不禁想它的背后逻辑究竟是什么。我想到了事先设置好的扣款顺序，马爸爸竟然一个一个试，知道把钱都拿走。![扣款顺序](C:\Users\lilacseeking\Desktop\微信图片_20210219213437.png)

------

## 二、还款逻辑

1.获取本期代还款账单

2.获取扣款方式

3.若存在则查询该方式下的用户余额，不存在则结束自动还款

4.若余额不为0则发起自动还款

5.若订单已结清则结束自动还款，未结清则通过下一扣款方式重复2-5步骤

该自动还款逻辑下流程如下所示：

![](C:\Users\lilacseeking\AppData\Roaming\Typora\typora-user-images\image-20210219215940352.png)

根据花呗自动还款的业务特点和责任链的特性，决定使用责任链来处理。

------

## 三、架构

aaa

------

## 四、其他说明

aaa

------

## 五、关于作者

吕明，2020年8月加入微盟集团。任职高级软件开发工程师，致力于用互联网的思维优化企业经营模式，用技术创造价值。

个人邮箱： lilacseeking@gmail.com

个人主页： www.lilacseeking.com

github主页:https://github.com/lilacseeking/

------


## 六、支持与帮助

aaa

------

## 七、推荐阅读

aaa

------
